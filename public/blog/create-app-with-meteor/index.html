<!doctype html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>
            
                Create App With Meteor - Khoa Pham
            
        </title>

        <meta name="keywords" content="Khoa Pham, web developer, frontend developer, UX, UI, web developer Portland" >
<meta name="description" content="Khoa Pham is a senior developer focusing on UX and writing clean code using latest technologies like Golang, Rails, EmberJS, and Postgres."/>
<meta name="viewport" content="width=device-width initial-scale=1.0" />
<link rel="canonical" href="" />
<link rel="author" href="https://plus.google.com/103713398374675106375/"/>


<meta property="og:title" content="Khoa Pham - Web Developer" >
<meta property="og:site_name" content="Khoa Pham">
<meta property="og:url" content="" >
<meta property="og:description" content="Khoa Pham is a senior developer focusing on UX and writing clean code using latest technologies like Golang, Rails, EmberJS, and Postgres." >
<meta property="og:image" content="https://avatars0.githubusercontent.com/u/1144585" >
<meta property="og:type" content="website" >
<meta property="og:locale" content="en_US" >

<meta property="twitter:card" content="summary" >
<meta property="twitter:title" content="Khoa Pham is a senior developer focusing on UX and writing good code." >
<meta property="twitter:description" content="Khoa Pham is a senior developer focusing on UX and writing clean code using latest technologies like Golang, Rails, EmberJS, and Postgres." >
<meta property="twitter:creator" content="@pmkhoa" >
<meta property="twitter:url" content="" >
<meta property="twitter:image" content="https://avatars0.githubusercontent.com/u/1144585" >




        
        <link rel="shortcut icon" href="http://khoapham.me/img/favicon.ico">

        
        <link rel="alternate" type="application/rss+xml" title="RSS" href="http://khoapham.me/index.xml">

        <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="http://khoapham.me/css/all.css">
        <link rel="stylesheet" href="http://khoapham.me/css/custom.css">
    </head>
    <body lang="en">
        <nav class="header" role="banner">
            <div class="inner-header wrap clearfix">
                <a id="logo" href="http://khoapham.me/">KHOA  PHAM</a>
                <ul class="header-nav">
                    <li class="nav-item"><a href="http://khoapham.me/blog" title="Blog">Blog</a></li>
                    <li class="nav-item"><a href="http://khoapham.me/about" title="About">About</a></li>
                </ul>
            </div>
        </nav>

<div class="Article-wrapper">
    <div class="Article-container">
        <div class="Article-content wrap clearfix">
            <h1 class="Article-title">Create App With Meteor</h1>
            <p>When I started to build the DearJJAbrams.com site, I came across a very simple functionality which was the realtime counter. This realtime counter worked as follow, when the user submitted their email, the counter would increase 1. However, this counter had to automatically update and synchronize with the server whenever anyone around the world submit their email, in other words, I had to create real time app with Meteor.</p>

<p>At this point, things were getting little more complicated. The big question was how could the browser know when the database was updated in order to get synchronized? But, I was lucky to found out that <a href="http://www.meteor.com">Meteor</a> was a perfect tool for this simple counter app.</p>

<p>In this article, I would like to share my little experience to create app with Meteor. You can see live example here at: <a href="http://simple-counter.meteor.com">http://simple-counter.meteor.com</a>.
The source code available at my <a href="https://github.com/khoap/simple-counter">Github</a>.</p>

<p><strong>1. Firstly, setting up Meteor app:</strong></p>

<p>Install and set up a Meteor app is extremely easy, you can follow the quick start from Meteor to setup you first app. <a href="http://docs.meteor.com">Meteor Documentation8</a>
If you prefer to use the <a href="http://oortcloud.github.io/meteorite/">meteorite</a> to initially create Meteor app, you can install Meteorite using following command:</p>

<pre><code>$ npm install -g meteorite
</code></pre>

<p>Then create a Meteor app by using:</p>

<pre><code>$ mrt create counter-app
</code></pre>

<p><strong>2. Structure Meteor app.</strong></p>

<p>When creating meteor app, you will have a simple structure of your app. However, you may want to re-organize things around to make things easier to work with.
Here is an example of my meteor app structure:</p>

<pre><code>counter-app
  client/
      lib/
      stylesheet/
      simple-counter.js
  public/
      fonts/
      images/
  server/
      simple-counter.js
  index.html
</code></pre>

<p>You can see more about the app structure from <a href="http://docs.meteor.com">meteor documentation</a>.</p>

<p><strong>3. On the client side.</strong></p>

<p>We display the counter value queried from the database, and handle the input event that people submit their email. Moreover, we want to create a publish &amp; subscribe relationship between the Meteor server &amp; client for the Counts documents in database.</p>

<pre><code>// Declare the Counts documents to hold the subscription from the server.
Counts = new Meteor.Collection(&quot;counts&quot;);
Meteor.subscribe(&quot;counts&quot;);
// Output the counter value to the handlebar template.
Template.CounterWrapper.CounterValue = function () {
  if (Counts.findOne()) {
    return Counts.findOne().countValue;
  }
};
// Handle the submit button event. If the email is correct, then call function on server side.
// submitEmail, passing a param: email.
Template.bodyContainer.events({
  'click .submit-counter' : function () {
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var email = $(&quot;#email&quot;).val();
    if ( (email != &quot;&quot;) &amp;amp;&amp;amp; (emailReg.test(email)) ) {
      Meteor.call('submitEmail', email, function(error) {
        if (error) {
          $(&quot;.notice-email-duplicate-input&quot;).fadeIn(600);
        }
        else {
          $(&quot;.notice-empty-input&quot;).fadeOut(500);
          $(&quot;.notice-email-duplicate-input&quot;).fadeOut(600);
        }
      });
    }
    else {
      $(&quot;.notice-empty-input&quot;).fadeIn(600);
    }
    return false;
  }
});
</code></pre>

<p><strong>4. On the server side.</strong></p>

<p>We will define the method &lsquo;submitEmail&rsquo; that is called in the client side to insert the email into the database.</p>

<pre><code>// We have two documents to handle the emails &amp;amp; counter values. Emails will be kept privately.
Emails = new Meteor.Collection(&quot;emails&quot;);
Counts = new Meteor.Collection(&quot;counts&quot;);
// Set up publish to the client.
Meteor.publish(&quot;counts&quot;, function() {
  return Counts.find({});
});

// When Meteor startup, we want to make sure that the counts is matched with the current number of emails in Email documents.
Meteor.startup(function () {
  if (Counts.find().count() === 0) {
    Counts.insert({name: 'counter', countValue: Emails.find().count()});
  }
});

// Declare Meteor method, to input the email into database.
Meteor.methods({
  submitEmail: function (email) {
    var currentCount = Counts.findOne();
    if (Emails.find({email : email}).count() &amp;gt;= 1) {
      throw new Meteor.Error(404, &quot;error&quot;);
    }
    else {
      Counts.update({_id: currentCount._id}, {$inc: {countValue: 1}});
      var user_id = Emails.insert({email: email});
    }
  }
});
</code></pre>

<p><strong>5. Deploying the app.</strong>
Now it&rsquo;s time to deploy the app, I used the Heroku server to deploy the DearJJAbrams.com site, but in this simple app, I just use the Meteor server. Since it&rsquo;s very easy &amp; free:</p>

<pre><code>$ meteor deploy myapp.meteor.com
</code></pre>

        </div>
        
        
        <div class="Article-related">
            <div class="Article-related-content wrap clearfix">
                <div class="Article-related-title">
                    <h3 class="uppercase"><span class="icon-shuffle"></span>More Articles</h3>
                </div>
                
                
                
                    
                    
                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/set-up-nginx-with-centos/" class="link-to-article">
    <div class="Article-summary">
        <h3>Set up Nginx with Centos</h3>
        <p><p>Recently I had a chance to have my hand on setting up a web server using Nginx
and Centos. The requirements were simple:</p>

<ul>
<li>Server can serve multiple domains or subdomains.</li>
<li>Each domain web folder is stored under different user account.</li>
</ul>
</p>
    </div>
</a>

                    
                
                    
                    
                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/es6-review-part-2/" class="link-to-article">
    <div class="Article-summary">
        <h3>ES6 Review Part 2</h3>
        <p>This is a second review post for new ES6 features that I&rsquo;d love to share. You can find the first review here ES6 Review Part 1 Arrows I have been using arrow (-&gt;) and fat-arrow (=&gt;) key in Coffeescript for while, and I was happy when ES6 would support arrow key (=&gt;) as a short-hand of function keyword. Of course, if you’re familiar with arrow keys in Coffeescript, this feature will be similar.</p>
    </div>
</a>

                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/es6-review-part-1/" class="link-to-article">
    <div class="Article-summary">
        <h3>ES6 Review Part 1</h3>
        <p>ECMAScript 6 (ES6) is the upcoming version of ECMACScript standard which is supposed to be ready soon. There are number of significant changes in this new standard version of Javascript. So far I can tell, this is indeed the future of Javascript, and I love it. In this short blog, I use ES6 to demonstrate some new features of ES6 by writing the linked list data structure. Classes ES6 finally allows you to declare your object using class keyword.</p>
    </div>
</a>

                    
                
                    
                    
                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/menuOnScroll-jquery-plugin/" class="link-to-article">
    <div class="Article-summary">
        <h3>MenuOnScroll - jQuery Plugin</h3>
        <p><p>Today I just released menuOnScroll - jQuery plugin that automatically updates the menu
navigation when you scroll. This functionality is extremely common on the web,
especially for the single page website.</p>
</p>
    </div>
</a>

                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/vim-common-helpful-leader/" class="link-to-article">
    <div class="Article-summary">
        <h3>Vim Commmon Helpful Leader</h3>
        <p>I have really enjoyed using Vim for a month now, and I have to admit that I love the feeling of learning new things from Vim everyday. Today I would love to share some of my favorite Vim Leaders that I found they&rsquo;re extremely helpful. You can add these into your .vimrc file, and give it a try. Open another file in same directory map &lt;Leader&gt;e :e &lt;C-R&gt;=escape(expand(&quot;%:p:h&quot;),' ') . '/'&lt;CR&gt; map &lt;Leader&gt;s :split &lt;C-R&gt;=escape(expand(&quot;%:p:h&quot;), ' ') .</p>
    </div>
</a>

                    
                
                    
                    
                    
                
                    
                    
                    
                
                    
                    
                    
                
                    
                    
                    
                
                    
                    
                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/middleman-localization/" class="link-to-article">
    <div class="Article-summary">
        <h3>Middleman Localization</h3>
        <p><p>Recently when developing a site using middleman, my client wonder that if we can do localization for the website. Fortunately, Middleman comes with the localization extension i18n which is pretty simple to integrate it into the site.</p>
</p>
    </div>
</a>

                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/sync-middleman-with-amazon-s3/" class="link-to-article">
    <div class="Article-summary">
        <h3>Sync Middleman with Amazon S3</h3>
        <p><p>One thing that I love using Middleman and Amazon S3 is that they&rsquo;re a perfect combination for building and hosting a static HTML5 site.</p>
</p>
    </div>
</a>

                    
                
                    
                    
                    
                        <a href="http://khoapham.me/blog/setting-up-amazon-web-services/" class="link-to-article">
    <div class="Article-summary">
        <h3>Setting up Amazon Web Services</h3>
        <p><p>To setting up Amazon Web Services, the process of setting up an EC2 on Amazon Web Services (AWS) is not complicated, all you need to get a server up and running are Apache, PHP,  MySQL.
Here are some initial steps that help you get started:</p>
</p>
    </div>
</a>

                    
                
                    
                    
                    
                
                    
                    
                    
                
            </div>
        </div>
        
    </div>
</div>
    <footer>
    <p class="footer-copyright">Carefully crafted by <a href="http://khoapham.me/about">Khoa Pham</a></p>
    </footer>

        <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-41349606-1', 'auto');
      ga('send', 'pageview');
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script type="text/javascript">
        hljs.initHighlightingOnLoad(); 
    </script>
  </body>
</html>

